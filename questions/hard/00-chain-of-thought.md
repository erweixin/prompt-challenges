# 思维链

## 🔴 困难

### 挑战描述

思维链（Chain of Thought）是一种强大的提示技术，它引导 AI 逐步显式地展示推理过程，而不是直接给出结论。通过引导 AI 分解复杂问题并展示每一步的思考过程，可以显著提高解决复杂推理任务的准确性。本挑战要求你设计一个提示词，使 AI 能够通过清晰的思维链解决复杂的多步骤推理问题。

### 挑战目标

编写一个提示词，使 AI 能够：
1. 将复杂问题分解为逻辑连贯的子步骤
2. 明确展示每个推理步骤及其依据
3. 在每个步骤上应用适当的知识和逻辑
4. 识别并处理推理中的不确定性或假设
5. 最终基于完整的推理链得出结论

### 要求

- 提示词必须鼓励分步骤推理，而非跳跃到结论
- 每个推理步骤必须明确且有逻辑支持
- 思维链必须针对问题特点进行适当的分解
- 推理过程中应考虑多种可能性，必要时进行评估筛选
- 最终结论应直接源自前面的推理步骤

### 提示模板

```
[你的提示词]

问题: {问题描述}
```

### 测试用例

**案例 1: 逻辑推理问题**

```
问题: 一个岛上有两种居民：诚实人总是说真话，说谎者总是说假话。你遇到三个岛民A、B和C。
A说："我是诚实人或者B是说谎者。"
B说："如果A是诚实人，那么C也是诚实人。"
C说："我是说谎者。"
请确定每个岛民是诚实人还是说谎者。
```

**案例 2: 概率问题**

```
问题: 有三个抽屉，一个抽屉里有两枚金币，一个抽屉里有两枚银币，还有一个抽屉里有一枚金币和一枚银币。抽屉上的标签都是错误的（即标有"两枚金币"的抽屉里肯定不是两枚金币，其他抽屉类似）。你可以从任意一个抽屉中随机抽出一枚硬币并查看。如果你想通过最少的抽取次数确定每个抽屉的实际内容，应该从哪个抽屉开始抽取？请说明完整推理过程。
```

**案例 3: 市场分析问题**

```
问题: 一家科技公司正考虑在以下三种产品中投资开发一种：AI助手、VR游戏或智能家居设备。市场研究表明：
- AI助手的开发成本最高，但如果成功，预期利润也最高
- VR游戏开发风险中等，利润中等
- 智能家居设备开发成本最低，风险最小，但预期利润也最低
- 如果竞争对手已经在开发类似产品，成功率会降低40%
- 市场调查显示，70%的消费者对AI助手感兴趣，50%对VR游戏感兴趣，80%对智能家居设备感兴趣
- 公司有消息称竞争对手可能已经在开发AI助手或智能家居设备

基于以上信息，公司应该投资开发哪种产品？请详细分析每个选项的利弊和风险回报比。
```

**案例 4: 数学优化问题**

```
问题: 一家工厂生产两种产品A和B。每个产品A需要2小时的组装时间和3小时的测试时间，每个产品B需要1小时的组装时间和4小时的测试时间。工厂每周有100小时的组装时间和120小时的测试时间可用。产品A的利润是每件400元，产品B的利润是每件300元。工厂应该如何安排生产计划以最大化利润？请详细说明解题思路和每一步的计算过程。
```

**案例 5: 环境决策问题**

```
问题: 一个小镇正在考虑三个减少碳排放的项目：安装太阳能发电板、改善公共交通系统或升级建筑物的能源效率。

安装太阳能板的初始投资为500万元，每年可减少2000吨碳排放，使用寿命为25年。

改善公共交通的初始投资为300万元，每年可减少1500吨碳排放，需要每5年投入100万元维护费用，预计使用30年。

升级建筑能效的初始投资为400万元，每年可减少1000吨碳排放，但效果会逐年提高，每年增加5%的减排量，项目寿命为20年。

小镇的预算限制为600万元，目标是在未来20年内最大化碳减排。哪个项目或项目组合是最佳选择？请通过逐步分析说明你的推理过程。
```

**案例 6: 法律推理问题**

```
问题: 考虑以下简化的法律案例：

法律规定：
1. 若某人不是出于正当防卫而蓄意伤害他人，构成攻击罪
2. 当一个人合理地相信自己面临即刻人身伤害的威胁时，可以使用必要的武力进行自卫，这构成正当防卫
3. 如果使用的武力超过了威胁所需的必要程度，则不能完全构成正当防卫
4. 如果一个人首先挑起冲突，然后试图自卫，通常不能主张正当防卫，除非他明确退出冲突

案件事实：
甲与乙在酒吧发生口角。甲先推了乙一把，乙摔倒在地。乙站起来后拿出一把折叠刀威胁要刺甲。甲退后并表示不想打架，但乙继续威胁并向甲逼近。甲看到旁边有一个酒瓶，拿起来击中了乙的头部，导致乙受轻伤。

甲是否可以成功主张正当防卫？请通过分析法律规定和案件事实，逐步推理出答案。
```

### 评分标准和自动测试方法

提示词将根据以下标准进行评分：

1. **步骤分解的合理性**（1分）
   - 评估方法: 检查推理过程是否被分解为适当数量的逻辑步骤
   - 通过标准: 复杂问题被分解为3-7个关键步骤，每个步骤解决问题的一个方面

2. **逻辑清晰性**（1分）
   - 评估方法: 评估每个推理步骤是否有明确的逻辑支持和推理基础
   - 通过标准: 每个推理步骤都清晰说明了从前提到结论的逻辑过程

3. **考虑多种可能性**（1分）
   - 评估方法: 检查是否考虑了问题的不同角度和可能的解决路径
   - 通过标准: 对关键决策点考虑了至少两个合理的可能性，并解释了选择特定路径的理由

4. **适当知识应用**（1分）
   - 评估方法: 评估是否正确应用了解决问题所需的领域知识
   - 通过标准: 正确使用相关公式、原理、规则或背景知识

5. **结论的完整性**（1分）
   - 评估方法: 检查最终结论是否完全基于前面的推理步骤，并回答了原始问题的所有方面
   - 通过标准: 结论直接从推理链推导出，不引入新信息，完整回答问题

### 自动测试流程

1. 对每个测试用例，使用你的提示词和问题作为输入
2. 分析输出是否包含明确标记的多个推理步骤
3. 评估每个步骤与下一步骤之间的逻辑连贯性
4. 检查是否考虑了关键的多种可能性
5. 验证结论的正确性和完整性
6. 计算最终得分(满分5分)

### 期望输出示例 (针对案例1)

```
我将通过逐步分析每个人的陈述，确定谁在说真话，谁在说谎。

步骤1: 分析C的陈述。
C说："我是说谎者。"
这里出现一个逻辑悖论：如果C是说谎者，他说的"我是说谎者"就是假话，那么C实际上是诚实人。但如果C是诚实人，他说"我是说谎者"就是真话，这就意味着他是说谎者。这形成了自相矛盾的循环。
结论：C不可能是说谎者，也不可能是诚实人...等等，我需要重新思考。

步骤2: 重新分析C的陈述。
如果C是诚实人，他会说"我是诚实人"，但他实际说"我是说谎者"，这与诚实人的定义矛盾。
如果C是说谎者，他说"我是说谎者"必须是假话，意味着他实际上是诚实人，这又与我们的假设矛盾。
由于存在矛盾，C的陈述在这个逻辑体系内无法成立，除非...C一定是说谎者。作为说谎者，他说"我是说谎者"这句话是假的，即他实际上不是说谎者。但这与前提矛盾。我们需要重新检视题目条件。

步骤3: 重新审视问题规则。
题目规定诚实人总是说真话，说谎者总是说假话。如果C说"我是说谎者"，根据这个规则：
如果C是诚实人，他说的必须是真话，但这会导致矛盾。
如果C是说谎者，他说的必须是假话，即"我不是说谎者"，这也导致矛盾。
这表明C一定是说谎者，因为诚实人不会说"我是说谎者"这种自相矛盾的话。

步骤4: 分析B的陈述。
B说："如果A是诚实人，那么C也是诚实人。"
我们已经确定C是说谎者，所以B的陈述等价于"如果A是诚实人，那么假"。
这意味着，如果B是诚实人，那么A必须是说谎者，否则会导致矛盾。
如果B是说谎者，那么他的陈述的否定为真，即"A是诚实人，但C不是诚实人"可能为真。

步骤5: 分析A的陈述。
A说："我是诚实人或者B是说谎者。"
这是一个逻辑或关系，只要有一个为真，整个陈述就为真。

步骤6: 综合分析所有信息。
我们已确定C是说谎者。
如果A是诚实人，根据他的陈述，"我是诚实人或B是说谎者"为真。但由于A是诚实人这部分已经满足了整个或关系，这不能确定B的身份。
如果A是说谎者，他的陈述"我是诚实人或B是说谎者"必须是假的。这意味着两部分都是假的，即A不是诚实人（已知）且B不是说谎者，即B是诚实人。

如果B是诚实人，他说"如果A是诚实人，那么C也是诚实人"必须为真。由于C是说谎者，这意味着A不能是诚实人，即A是说谎者。
如果B是说谎者，A可能是诚实人或说谎者。

检查一下所有组合：
- 如果A和B都是诚实人，C是说谎者：A的陈述为真，B的陈述为"如果真，那么假"，这是假的，矛盾！
- 如果A是诚实人，B和C都是说谎者：A的陈述为真，B的陈述为"如果真，那么假"的否定，即"真且假"，仍然矛盾！
- 如果A和C都是说谎者，B是诚实人：A的陈述"我是诚实人或B是说谎者"为假，即"A不是诚实人且B不是说谎者"，符合！B的陈述为"如果假，那么假"，为真，符合！
- 如果A、B、C都是说谎者：A的陈述为假，即"A不是诚实人且B不是说谎者"，矛盾！

结论：A和C是说谎者，B是诚实人。
```

### 解决方案讨论

[点击查看社区解决方案](https://github.com/erweixin/prompt-challenges/discussions/7)

---

提交你的解决方案，与社区分享你的思路和技巧！ 